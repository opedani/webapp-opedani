///////////////////////////////////////////////////////////////////////////////
// DEPENDENCIES
///////////////////////////////////////////////////////////////////////////////

import { filterAnimeNames, updateAutocompleteBox } from '/js/modules/autocomplete.js'
import { initPersistentData } from '/js/modules/persist.js'

///////////////////////////////////////////////////////////////////////////////
// PROPERTIES
///////////////////////////////////////////////////////////////////////////////

let indexSearchInput
let indexAutocompleteWrapper

///////////////////////////////////////////////////////////////////////////////
// FUNCTIONS
///////////////////////////////////////////////////////////////////////////////

function setElements()
{
    indexSearchInput = $('.index-search-input')
    indexAutocompleteWrapper = $('.index-autocomplete-wrapper')
}

function setEventListeners()
{
    indexSearchInput.on('input', (event) =>
    {
        updateAutocompleteBox(indexAutocompleteWrapper, 'index-autocomplete', filterAnimeNames(event.target.value))
    })
}

///////////////////////////////////////////////////////////////////////////////
// SETUP
///////////////////////////////////////////////////////////////////////////////

function ready()
{
    setElements()
    setEventListeners()
    initPersistentData()
}

$(document).ready(ready)